# Debug的使用



## Debug是什么？



- Debug是Dos系统中著名的调试程序，也可以运行在windows系统Intel x86架构**实模式**下。
- 使用Debug程序，可以查看CPU各种寄存器中的内容、内存情况，并且在机器指令级跟踪程序的运行



## Debug能做些什么？



- 用R命令查看、改变CPU寄存器的内容
- 用D命令查看内存中的内容
- 用E命令改变内存中的内容
- 用U命令将内存中的机器指令翻译成汇编指令
- 用A命令以汇编指令的格式在内存中写入机器指令
- 用T命令执行机器指令
- ......



## 启动Debug



挂载

```shell
mount c h:\masm
```

转到 c 盘

```shell
c:
```

在Dos提示符下输入命令Debug

```shell
debug
```



## 用R命令查看、改变CPU寄存器的内容



- R - 查看寄存器内容
- R 寄存器名 - 改变指定寄存器内容



## 用D命令查看内容中的内容



- D - 列出预设地址内容处的128个字节的内容
- D 段地址:偏移地址 - 列出内存指定地址处的内容
- D 段地址:偏移地址 结尾偏移地址 - 列出内存中指定地址范围的内容



## 用E命令改变内容中的内容



- E 段地址:偏移地址 数据1 数据2 ...
- E 段地址:偏移地址
  - 逐个询问式修改
  - 空格 - 接收，继续
  - 回车 - 结束



## 用U命令将内存中的机器指令翻译成汇编指令



- 汇编指令

```assembly
mov ax,0123H
mov bx,0003H
mav ax,bx
add ax,bx
```



- 对应的机器码为

```assembly
B8 23 01
BB 03 00
89 D8
01 D8
```



- e 地址 数据 - 写入
- d 地址 - 查看数据
- u 地址 - 查看代码



## 用A命令以汇编指令的格式在内存中写入机器指令



- 汇编指令

```assembly
mov ax,0123H
mov bx,0003H
mav ax,bx
add ax,bx
```



- 对应的机器码为

```assembly
B8 23 01
BB 03 00
89 D8
01 D8
```



- a 地址 写入汇编指令
- d 地址 - 查看数据
- u 地址 - 查看代码



## 用T命令执行机器指令



- t - 执行 CS:IP处的指令

```assembly
mov ax,0123H
mov bx,0003H
mav ax,bx
add ax,bx
```

